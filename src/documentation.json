{
    "openapi": "3.1.0",
    "info": {
        "title": "Rappels-Tâches",
        "summary": "Api qui sert à créer des tâches avec des sous-tâches pour s'en rappeler.",
        "description": "Elle permet de créer des tâches propres à chaque utilisateur et d'y affecter des sous-tâches",
        "contact": {
            "name": "Vincent HOule",
            "url": "https://www.example.com/support",
            "email": "monadresse@gmail.com"
        },
        "version": "1.0.1 "
    },
    "servers": [
        {
            "url": "https://two241013-patate01.onrender.com",
            "description": "Serveur en ligne"
        },
        {
            "url": "http://127.0.0.1:3000/",
            "description": "Serveur de développement"
        }
    ],
    "paths": {
        "/tachesMemoire/taches/listes": {
            "get": {
                "description": "Retourne la liste des tâches d'un utilisateur",
                "summary": "Liste des tâches",
                "tags": [
                    "SELECT"
                ],
                "parameters": [
                    {
                        "name": "utilisateur_id",
                        "in": "params",
                        "description": "permet de choisir l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Lorsque le format des attributs n'est pas respecté",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "L'id ne doit pas être vide"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Lorsqu'aucune tâches est affecté à l'utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "aucucne tâches"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Lorsque la requête sql échoue",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de la récupération des tâches de l'utilisateur"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "La liste des tâches selon l'utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "Tâches": [
                                            {
                                                
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/tachesMemoire/taches/:id": {
            "get": {
                "description": "Retourne la tâches selon son id",
                "summary": "SELECT une tâche",
                "tags": [
                    "SELECT"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "params",
                        "description": "permet de choisir la tâche",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retourne la tâches selon son id",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "id": 1033,
                                        "nom": "Frosmoth",
                                        "type_primaire": "Ice",
                                        "type_secondaire": "Bug",
                                        "pv": 70,
                                        "attaque": 65,
                                        "defense": 60
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Format de l'id invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "L'id de la tâche est obligatoire et doit être supérieur à 0"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "L'id est inexistant",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "tâches introuvable"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur lors du SELECT SQL",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de la récupération de la tâches"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "description": "Modifier les attributs d'une tâches",
                "summary": "Update d'une tâches",
                "tags": [
                    "UPDATE"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "params",
                        "description": "permet de choisir le pokemon a modifié",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "nom",
                        "in": "body",
                        "description": "permet de changer le nom",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type_primaire",
                        "in": "body",
                        "description": "permet de changer le type primaire",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type_secondaire",
                        "in": "body",
                        "description": "permet de changer le type secondaire",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pv",
                        "in": "body",
                        "description": "permet de changer les pv",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "attque",
                        "in": "body",
                        "description": "permet de changer l'attaque",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "defenses",
                        "in": "body",
                        "description": "permet de changer la défense",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Le nouveaux pokemon qui a été modifier",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "Message": "Le pokemon id 2 a été modifié avec succès",
                                        "Pokemons": {
                                            "nom": "Cooky",
                                            "type_primaire": "roche",
                                            "type_secondaire": "obèse",
                                            "pv": 92,
                                            "attaque": 20,
                                            "defense": 150
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Retourne quel champs n'est pas valide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "message": "Le nom est vide, manquant ou invalide. Le type primaire est vide, manquant ou invalide. Le type secondaire est manquant ou invalide. Les pv est vide ou invalide. L'attaque est vide ou invalide. La defense est vide ou invalide. "
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Retourne information de l'échec de l'update",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de la modification"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "description": "Supprime un pokemon de la base de données",
                "summary": "DELETE Pokemon",
                "tags": [
                    "DELETE"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "params",
                        "description": "permet de choisir le pokemon a supprimé",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retourne information de la réussite de la suppression",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "objet",
                                    "example": {
                                        "Message": "Le pokemon id 1 a été supprimé avec succès",
                                        "Pokemon": {}
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Format de l'id invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "L'id du pokemon est obligatoire et doit être supérieur à 0"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Retourne information de l'échec de la suppression",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de la suppression"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pokemon": {
            "post": {
                "description": "Ajoute un pokemon dans la liste",
                "summary": "INSERT un pokemon",
                "tags": [
                    "INSERT"
                ],
                "parameters": [
                    {
                        "name": "nom",
                        "in": "body",
                        "description": "permet de changer le nom",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type_primaire",
                        "in": "body",
                        "description": "permet de changer le type primaire",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type_secondaire",
                        "in": "body",
                        "description": "permet de changer le type secondaire",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pv",
                        "in": "body",
                        "description": "permet de changer les pv",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "attque",
                        "in": "body",
                        "description": "permet de changer l'attaque",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "defenses",
                        "in": "body",
                        "description": "permet de changer la défense",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retourne la confirmation de la réussite de l'insertion",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "Info": "Le pokemon a été ajouté avec succès",
                                        "Pokemon": {
                                            "nom": "Cooky",
                                            "type_primaire": "Rock",
                                            "type_secondaire": "Stone",
                                            "pv": 92,
                                            "attaque": 20,
                                            "defense": 150
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Retourne quel champs n'est pas valide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Le nom est vide, manquant ou invalide. Le type primaire est vide, manquant ou invalide. Le type secondaire est manquant ou invalide. Les pv est vide ou invalide. L'attaque est vide ou invalide. La defense est vide ou invalide. "
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Retourne information de l'échec de l'insert",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de l'insertion"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/tachesMemoire/utilisateurs/": {
            "post": {
                "description": "Ajoute un utilisateur",
                "summary": "INSERT utilisateur",
                "tags": [
                    "INSERT"
                ],
                "parameters": [
                    {
                        "name": "nom",
                        "in": "body",
                        "description": "permet de donner un nom",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "prenom",
                        "in": "body",
                        "description": "permet de donner un prenom",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "courriel",
                        "in": "body",
                        "description": "permet de donner un courriel et de s'indentifier",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "mot_de_passse",
                        "in": "body",
                        "description": "permet de donner un mot de passe et de s'indentifier",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                    
                ],
                "responses": {
                    "400": {
                        "description": "Lorsque le format des attributs n'est pas respecté",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Le mot de passe doit être valide selon le format."
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Lorsque la requête sql échoue",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de l'insertion de l'utilisateur"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Confirmation de l'ajout de l'utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "Tâches": [
                                            {
                                                "Message": "Utilisateur créé",
                                                "cle_api": "826c19f6-4bfc-4351-9e1f-3b5dcd225dc7"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/tachesMemoire/utilisateurs/cle": {
            "get": {
                "description": "Permet de voir sa cle d'api",
                "summary": "SELECT utilisateur",
                "tags": [
                    "SELECT"
                ],
                "parameters": [
                    {
                        "name": "courriel",
                        "in": "body",
                        "description": "permet de trouver l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "mot_de_passse",
                        "in": "body",
                        "description": "permet de valider l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Lorsque le format des attributs n'est pas respecté",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Le mot de passe doit être valide selon le format."
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Le mot de passe est incorrecte",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "mauvais mot de passe ou courriel. "
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Lorsque la requête sql échoue",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "example": "Erreur lors de l'insertion de l'utilisateur"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Confirmation de l'ajout de l'utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {
                                        "Tâches": [
                                            {
                                                "Message": "Utilisateur créé",
                                                "cle_api": "826c19f6-4bfc-4351-9e1f-3b5dcd225dc7"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": [
            {
                "tâche": {
                    "type": "object",
                    "required": [
                        "id",
                        "utilisateur_id",
                        "titre",
                        "description",
                        "date_debut",
                        "date_echeance",
                        "complete"
                    ],
                    "properties": {
                        "id": {
                            "type": "integer"
                        },
                        "utilisateur_id": {
                            "type": "integer"
                        },
                        "titre": {
                            "type": "string"
                        },
                        "description": {
                            "type": "string"
                        },
                        "date_debut": {
                            "type": "date"
                        },
                        "date_echeance": {
                            "type": "date"
                        },
                        "complete": {
                            "type": "boolean"
                        }
                    }
                }
            },
            {
                "sous-tâche": {
                    "type": "object",
                    "required": [
                        "id",
                        "tache_id",
                        "titre",
                        "complete"
                    ],
                    "properties": {
                        "id": {
                            "type": "integer"
                        },
                        "tache_id": {
                            "type": "integer"
                        },
                        "complete": {
                            "type": "boolean"
                        }
                    }
                }
            },
            {
                "utilisateur": {
                    "type": "object",
                    "required": [
                        "id",
                        "nom",
                        "prenom",
                        "courriel",
                        "cle_api",
                        "password"

                    ],
                    "properties": {
                        "id": {
                            "type": "integer"
                        },
                        "nom": {
                            "type": "string"
                        },
                        "prenom": {
                            "type": "string"
                        },
                        "courriel": {
                            "type": "string"
                        },
                        "cle_api": {
                            "type": "string"
                        },
                        "password": {
                            "type": "string"
                        }
                    }
                }
            }
        ]
    }
}